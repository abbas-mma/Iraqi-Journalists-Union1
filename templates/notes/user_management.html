{% extends "base.html" %}
{% block title %}Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†{% endblock %}
{% block content %}
<div class="flex items-center justify-between mb-4">
  <h2 class="text-xl font-bold">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>
  <a href="{% url 'role_change_log' %}" class="bg-yellow-600 text-white px-3 py-1 rounded hover:bg-yellow-700">Ø³Ø¬Ù„ ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</a>
</div>
{% if messages %}
  <ul class="mb-4">
    {% for message in messages %}
      <li style="color:{% if message.tags == 'error' %}red{% elif message.tags == 'success' %}green{% else %}#555{% endif %};font-weight:bold;">{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}
<table class="min-w-full divide-y divide-gray-200 bg-white rounded shadow">
    <thead class="bg-gray-100">
        <tr>
            <th class="px-4 py-2">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
            <th class="px-4 py-2">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
            <th class="px-4 py-2">Ø§Ù„Ø¯ÙˆØ±</th>
            <th class="px-4 py-2">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
        <tr>
            <td class="px-4 py-2">{{ user.username }}</td>
            <td class="px-4 py-2">{{ user.email }}</td>
            <td class="px-4 py-2">
                {% if user != request.user %}
                    {% include "notes/roles_choices.html" with user=user %}
                {% else %}
                    <span class="text-gray-400">{{ user.userprofile.role }}</span>
                {% endif %}
            </td>
            <td class="px-4 py-2">
                {% if user != request.user %}
                <form method="post" action="{% url 'delete_user' user.id %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="text-red-600 hover:underline" onclick="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ');">Ø­Ø°Ù</button>
                </form>
                {% else %}
                <span class="text-gray-400">Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­Ø°Ù Ù†ÙØ³Ùƒ</span>
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="4" class="text-center py-4">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
