{% extends "base.html" %}
{% load static %}
{% block title %}Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ± - Ø§ØªØ­Ø§Ø¯ Ø§Ù„ØµØ­ÙÙŠÙŠÙ† Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠÙŠÙ†{% endblock %}
{% block content %}
<h2 class="text-2xl font-bold mb-6 text-blue-900">ğŸ“ˆ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h2>

<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <div class="bg-white rounded shadow p-6">
        <h3 class="font-bold mb-4">Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹</h3>
        <canvas id="notesByType"></canvas>
    </div>
    <div class="bg-white rounded shadow p-6">
        <h3 class="font-bold mb-4">Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø­Ø³Ø¨ Ø§Ù„Ø´Ù‡Ø±</h3>
        <canvas id="notesByMonth"></canvas>
    </div>
    <div class="bg-white rounded shadow p-6">
        <h3 class="font-bold mb-4">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆØ±</h3>
        <canvas id="usersByRole"></canvas>
    </div>
</div>

<!-- Ù‡Ù†Ø§ Ù†Ù…Ø±Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒÙ€ JSON Ø¢Ù…Ù† -->
{{ notes_by_type_labels|json_script:"notesByTypeLabels" }}
{{ notes_by_type_data|json_script:"notesByTypeData" }}

{{ notes_by_month_labels|json_script:"notesByMonthLabels" }}
{{ notes_by_month_data|json_script:"notesByMonthData" }}

{{ users_by_role_labels|json_script:"usersByRoleLabels" }}
{{ users_by_role_data|json_script:"usersByRoleData" }}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø®ÙÙŠØ©
    const notesByTypeLabels = JSON.parse(document.getElementById('notesByTypeLabels').textContent);
    const notesByTypeData = JSON.parse(document.getElementById('notesByTypeData').textContent);

    new Chart(document.getElementById('notesByType'), {
        type: 'pie',
        data: {
            labels: notesByTypeLabels,
            datasets: [{
                data: notesByTypeData,
                backgroundColor: ['#1976d2','#388e3c','#fbc02d','#d32f2f','#7b1fa2']
            }]
        }
    });

    const notesByMonthLabels = JSON.parse(document.getElementById('notesByMonthLabels').textContent);
    const notesByMonthData = JSON.parse(document.getElementById('notesByMonthData').textContent);

    new Chart(document.getElementById('notesByMonth'), {
        type: 'bar',
        data: {
            labels: notesByMonthLabels,
            datasets: [{
                label: 'Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚',
                data: notesByMonthData,
                backgroundColor: '#1976d2'
            }]
        }
    });

    const usersByRoleLabels = JSON.parse(document.getElementById('usersByRoleLabels').textContent);
    const usersByRoleData = JSON.parse(document.getElementById('usersByRoleData').textContent);

    new Chart(document.getElementById('usersByRole'), {
        type: 'doughnut',
        data: {
            labels: usersByRoleLabels,
            datasets: [{
                data: usersByRoleData,
                backgroundColor: ['#388e3c','#fbc02d','#d32f2f','#7b1fa2','#1976d2']
            }]
        }
    });
</script>
{% endblock %}
